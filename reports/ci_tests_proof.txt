
   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_position_sizing_basic_functionality(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_stop_calculator_basic_functionality(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_bcmath_precision(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_zero_division_protection(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_overflow_protection(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_negative_value_protection(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_risk_calculation_consistency(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\ComprehensiveMathTest::test_leverage_constraints(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\E2E\MultiTenantDataIsolationTest::tenant_a_cannot_access_tenant_b_trades(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\E2E\MultiTenantDataIsolationTest::rls_policies_are_enforced_at_database_level(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\E2E\MultiTenantDataIsolationTest::cross_tenant_update_attempts_fail(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.
PHPUnit 11.5.33 by Sebastian Bergmann and contributors.

Runtime:       PHP 8.3.6 with Xdebug 3.4.5
Configuration: /home/emir/Desktop/sentinentx/phpunit.xml
Random Seed:   1756300922


   PASS  Tests\Unit\RiskGuardExtendedTest
  âœ“ usdt depeg edge case exactly 995                                     0.42s  
  âœ“ usdt depeg edge case exactly 1005                                    0.10s  
  âœ“ usdt depeg low parity blocks                                         0.09s  
  âœ“ ok to open insufficient buffer                                       0.10s  
  âœ“ ok to open valid position                                            0.09s  
  âœ“ usdt depeg high parity blocks                                        0.09s  
  âœ“ usdt depeg extreme values                                            0.10s  
  âœ“ usdt depeg with different bounds                                     0.10s  
  âœ“ usdt depeg normal parity                                             0.09s  

   PASS  Tests\Unit\MarketDataServiceTest
  âœ“ liquidity scores reflect market depth                                0.18s  
  âœ“ mock data is deterministic                                           0.10s  
  âœ“ spread calculation is accurate                                       0.09s  
  âœ“ price relationships are logical                                      0.09s  
  âœ“ volatility reflects crypto market characteristics                    0.09s  
  âœ“ order book different depths work                                     0.09s  
  âœ“ order book depth provides realistic levels                           0.10s  
  âœ“ all crypto symbols have consistent data                              0.10s  
  âœ“ get best price returns realistic crypto prices                       0.10s  
  âœ“ market data supports trading decisions                               0.10s  
  âœ“ current price includes realistic spread                              0.10s  

   WARN  Tests\Unit\DataExportServiceTest
  - export handles empty user data gracefully â†’ GDPR service schema compatibility needs production alignment
  - export filename contains user and timestamp â†’ GDPR service schema compatibility needs production alignment
  - export includes sensitive financial data correctly â†’ GDPR service schema compatibility needs production alignment
  - export includes metadata for compliance â†’ GDPR service schema compatibility needs production alignment
  - export size is reasonable for active trader â†’ GDPR service schema compatibility needs production alignment
  - export includes ai decision reasoning â†’ GDPR service schema compatibility needs production alignment
  - export includes all crypto trading data â†’ GDPR service schema compatibility needs production alignment
  - export json structure is valid â†’ GDPR service schema compatibility needs production alignment
  - export user data creates comprehensive json export â†’ GDPR service schema compatibility needs production alignment
  - export respects user isolation â†’ GDPR service schema compatibility needs production alignment

   PASS  Tests\Unit\Services\Trading\TradeManagerTest
  âœ“ trade manager instantiation                                          0.18s  
  âœ“ open with fallback handles failure                                   0.10s  
  âœ“ open with fallback post only success                                 0.09s  

   FAIL  Tests\Unit\ConsensusServiceExtendedTest
  âœ“ two round consensus stage1 stage2                                    0.17s  
  - consensus metadata structure â†’ ConsensusService metadata structureâ€¦  0.10s  
  - consensus with invalid actions â†’ ConsensusService invalid actions lâ€¦ 0.10s  
  - mixed actions consensus â†’ ConsensusService mixed actions logic needâ€¦ 0.10s  
  â¨¯ weighted median calculation                                          0.12s  
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
   FAILED  Tests\Unit\ConsensusServiceExtendedTest > weighted median calculaâ€¦   
  Failed asserting that 70 is equal to 80 or is greater than 80.

  at tests/Unit/ConsensusServiceExtendedTest.php:110
    106â–•         $decision = $consensus->decide(['symbol' => 'BTCUSDT']);
    107â–• 
    108â–•         // Middle confidence (80) should dominate
    109â–•         $this->assertEquals('LONG', $decision['action']);
  âžœ 110â–•         $this->assertGreaterThanOrEqual(80, $decision['confidence']);
    111â–•     }
    112â–• 
    113â–•     public function test_deviation_veto_leverage()
    114â–•     {

  1   tests/Unit/ConsensusServiceExtendedTest.php:110


  Tests:    1 failed, 13 skipped, 24 passed, [2m1301 pending[22m (130 assertions)
  Duration: 7.59s
  Random Order Seed: 1756300922

Time: 00:06.862, Memory: 72.50 MB

Consensus Service Extended (Tests\Unit\ConsensusServiceExtended)
 âœ” Two round consensus stage1 stage2
 âœ˜ Weighted median calculation
   â”‚
   â”‚ Failed asserting that 70 is equal to 80 or is greater than 80.
   â”‚
   â”‚ /home/emir/Desktop/sentinentx/tests/Unit/ConsensusServiceExtendedTest.php:110
   â”‚
 â†© Mixed actions consensus
 â†© Consensus metadata structure
 â†© Consensus with invalid actions

Market Data Service (Tests\Unit\MarketDataService)
 âœ” Get best price returns realistic crypto prices
 âœ” Current price includes realistic spread
 âœ” Volatility reflects crypto market characteristics
 âœ” Liquidity scores reflect market depth
 âœ” Spread calculation is accurate
 âœ” Order book depth provides realistic levels
 âœ” Order book different depths work
 âœ” All crypto symbols have consistent data
 âœ” Price relationships are logical
 âœ” Market data supports trading decisions
 âœ” Mock data is deterministic

Risk Guard Extended (Tests\Unit\RiskGuardExtended)
 âœ” Usdt depeg normal parity
 âœ” Usdt depeg low parity blocks
 âœ” Usdt depeg high parity blocks
 âœ” Usdt depeg edge case exactly 995
 âœ” Usdt depeg edge case exactly 1005
 âœ” Usdt depeg with different bounds
 âœ” Usdt depeg extreme values
 âœ” Ok to open valid position
 âœ” Ok to open insufficient buffer

Trade Manager (Tests\Unit\Services\Trading\TradeManager)
 âœ” Trade manager instantiation
 âœ” Open with fallback post only success
 âœ” Open with fallback handles failure

FAILURES!
Tests: 38, Assertions: 130, Failures: 1, PHPUnit Deprecations: 11, Skipped: 13.

Generating code coverage report in Clover XML format ... done [00:00.322]

Generating code coverage report in HTML format ... done [00:01.873]
